<div class="admin-container">

  <aside class="sidebar">
    <div class="sidebar-header">
      <h2>Golden<span class="text-gold">Stay</span></h2>
      <p class="admin-label">Pannello Admin</p>
    </div>

    <nav class="sidebar-menu">

      <a class="menu-item"
         routerLink="/admin-dashboard"
         routerLinkActive="active"
         [routerLinkActiveOptions]="{exact: true}">
        <i class="icon">üè†</i> Gestione Stanze
      </a>

      <a class="menu-item"
         routerLink="/admin/booking"
         routerLinkActive="active">
        <i class="icon">üìÖ</i> Prenotazioni
      </a>

      <div class="spacer"></div>

    </nav>
  </aside>


  <main class="main-content">

    <header class="page-header">
      <div class="header-text">
        <h1>Gestione Stanze</h1>
        <p class="subtitle">Visualizza e gestisci l'inventario del tuo Hotel.</p>
      </div>
      <button class="btn-add" routerLink="/create-room">
        + Aggiungi Nuova Stanza
      </button>
    </header>

    <div class="rooms-grid">

      @for (room of roomService.rooms(); track room.id) {

        <div class="room-card">
          <div class="card-image">
            <img [src]="room.imageUrl || 'https://via.placeholder.com/300x200?text=No+Image'" [alt]="room.title">
            <span class="status-badge active">Attiva</span>
          </div>

          <div class="card-body">
            <h3>{{ room.title }}</h3>
            <p class="room-details">Ospiti: {{ room.capacity }} ‚Ä¢ {{ room.description }}</p>

            <div class="price">
              {{ room.pricePerNight | currency:'EUR' }}
              <span class="night">/ notte</span>
            </div>

            <div class="actions">
              <button class="btn-edit" (click)="apriModifica(room)">‚úèÔ∏è Modifica</button>
              <button class="btn-delete" (click)="eliminaStanza(room.id!)">üóëÔ∏è Elimina</button>
            </div>
          </div>
        </div>

      } @empty {
        <div class="no-rooms">
          <p>Nessuna stanza trovata. Inizia a produrle!</p>
        </div>
      }

    </div>
    @if (editingRoom) {
      <div class="modal-backdrop" (click)="chiudiModale()">
        <div class="modal-content" (click)="$event.stopPropagation()">

          <div class="modal-header">
            <h2>‚úèÔ∏è Modifica Stanza</h2>
            <button class="btn-close" (click)="chiudiModale()">‚úñ</button>
          </div>

          <div class="modal-body">

            <div class="form-group">
              <label>Titolo Stanza</label>
              <input type="text" [(ngModel)]="editingRoom.title" placeholder="Es. Suite Imperiale">
            </div>

            <div class="form-group">
              <label>Descrizione</label>
              <textarea [(ngModel)]="editingRoom.description" rows="3"></textarea>
            </div>

            <div class="row">
              <div class="form-group">
                <label>Prezzo (‚Ç¨)</label>
                <input type="number" [(ngModel)]="editingRoom.pricePerNight">
              </div>
              <div class="form-group">
                <label>Capienza (Persone)</label>
                <input type="number" [(ngModel)]="editingRoom.capacity">
              </div>
            </div>

            <div class="form-group">
              <label>URL Immagine</label>
              <input type="text" [(ngModel)]="editingRoom.imageUrl">
            </div>

          </div>

          <div class="modal-footer">
            <button class="btn-cancel" (click)="chiudiModale()">Annulla</button>
            <button class="btn-save" (click)="salvaModifiche()">üíæ Salva Modifiche</button>
          </div>

        </div>
      </div>
    }
  </main>
</div>
